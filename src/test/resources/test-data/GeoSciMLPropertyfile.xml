<?xml version="1.0" encoding="UTF-8"?>
<as:AppSchemaDataAccess xmlns:as="http://www.geotools.org/app-schema"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.geotools.org/app-schema AppSchemaDataAccess.xsd">
  <namespaces>
    <Namespace>
      <prefix>gml</prefix>
      <uri>http://www.opengis.net/gml</uri>
    </Namespace>
    <Namespace>
      <prefix>gsml</prefix>
      <uri>urn:cgi:xmlns:CGI:GeoSciML:2.0</uri>
    </Namespace>
    <Namespace>
      <prefix>xlink</prefix>
      <uri>http://www.w3.org/1999/xlink</uri>
    </Namespace>
  </namespaces>
  <sourceDataStores>
    <DataStore>
      <id>PropertyFiles</id>
      <parameters>
        <Parameter>
          <name>directory</name>
          <!-- path can be relative to this file if starts with "file: -->
          <value>file:./data</value>
        </Parameter>
      </parameters>
    </DataStore>
  </sourceDataStores>
  <targetTypes>
    <FeatureType>
      <schemaUri>http://www.geosciml.org/geosciml/2.0/xsd/geosciml.xsd
      </schemaUri>
    </FeatureType>
  </targetTypes>
  <typeMappings>
    <FeatureTypeMapping>
      <sourceDataStore>PropertyFiles</sourceDataStore>
      <sourceType>MappedFeaturePropertyfile</sourceType>
      <isDenormalised>true</isDenormalised>
      <targetElement>
        gsml:MappedFeature
      </targetElement>
      <attributeMappings>
        <AttributeMapping>
          <targetAttribute>
            gsml:MappedFeature
          </targetAttribute>
          <idExpression>
            <OCQL>ID</OCQL>
          </idExpression>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gml:name</targetAttribute>
          <sourceExpression>
            <OCQL>LEX_D</OCQL>
          </sourceExpression>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:positionalAccuracy</targetAttribute>
          <targetAttributeNode>gsml:CGI_NumericValuePropertyType
          </targetAttributeNode>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>/gsml:positionalAccuracy/gsml:CGI_NumericValue/gsml:principalValue
          </targetAttribute>
          <sourceExpression>
            <OCQL>LOC_ACC</OCQL>
          </sourceExpression>
          <ClientProperty>
            <name>uom</name>
            <value>'urn:ogc:def:uom:UCUM:m'</value>
          </ClientProperty>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:shape</targetAttribute>
          <sourceExpression>
            <OCQL>SHAPE</OCQL>
          </sourceExpression>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:samplingFrame</targetAttribute>
          <ClientProperty>
            <name>xlink:href</name>
            <value>'urn:cgi:feature:CGI:EarthNaturalSurface'</value>
          </ClientProperty>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:observationMethod/gsml:CGI_TermValue/gsml:value
          </targetAttribute>
          <isMultiple>true</isMultiple>
          <encodeIfEmpty>true</encodeIfEmpty>
          <sourceExpression>
            <OCQL>OBS_METHOD</OCQL>
          </sourceExpression>
          <!-- testing client properties on simple attributes -->
          <ClientProperty>
            <name>codeSpace</name>
            <value>'http://urn.opengis.net'</value>
          </ClientProperty>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gml:metaDataProperty</targetAttribute>
          <isMultiple>true</isMultiple>
          <encodeIfEmpty>true</encodeIfEmpty>
          <ClientProperty>
            <name>xlink:href</name>
            <value>strConcat('#meta.', OBS_METHOD)</value>
          </ClientProperty>
        </AttributeMapping>
      </attributeMappings>
    </FeatureTypeMapping>
    <FeatureTypeMapping>
      <sourceDataStore>PropertyFiles</sourceDataStore>
      <sourceType>MappedFeaturePropertyfile</sourceType>
      <targetElement>gsml:GeologicUnit</targetElement>
      <isDenormalised>true</isDenormalised>
      <attributeMappings>
        <AttributeMapping>
          <targetAttribute>gsml:GeologicUnit</targetAttribute>
          <idExpression>
            <OCQL>GEOLOGIC_UNIT_ID</OCQL>
          </idExpression>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:occurrence</targetAttribute>
          <isMultiple>true</isMultiple>
          <encodeIfEmpty>true</encodeIfEmpty>
          <sourceExpression>strConcat('#mf.', ID)</sourceExpression>
          <ClientProperty>
            <name>xlink:href</name>
            <value>strConcat('#mf.', ID)</value>
          </ClientProperty>
        </AttributeMapping>
      </attributeMappings>
    </FeatureTypeMapping>
    <FeatureTypeMapping>
      <sourceDataStore>PropertyFiles</sourceDataStore>
      <sourceType>CompositionPart</sourceType>
      <targetElement>gsml:CompositionPart</targetElement>
      <attributeMappings>
        <AttributeMapping>
          <targetAttribute>gsml:CompositionPart</targetAttribute>
          <idExpression>
            <OCQL>ROW_ID</OCQL>
          </idExpression>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:role</targetAttribute>
          <sourceExpression>
            <OCQL>COMPONENT_ROLE</OCQL>
          </sourceExpression>
          <ClientProperty>
            <name>codeSpace</name>
            <value>'urn:cgi:classifierScheme:Example:CompositionPartRole'
            </value>
          </ClientProperty>
        </AttributeMapping>
        <AttributeMapping>
          <targetAttribute>gsml:proportion/gsml:CGI_TermValue/gsml:value
          </targetAttribute>
          <sourceExpression>
            <OCQL>PROPORTION</OCQL>
          </sourceExpression>
        </AttributeMapping>
      </attributeMappings>
    </FeatureTypeMapping>
  </typeMappings>
</as:AppSchemaDataAccess>